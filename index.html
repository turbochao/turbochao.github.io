<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



<title>
  
    turbochao
  
</title>

<meta property="og:type" content="website">
<meta property="og:title" content="turbochao">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="turbochao">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="turbochao">


  <link rel="alternative" href="/atom.xml" title="turbochao" type="application/atom+xml">



  <link rel="icon" href="/favicon.png">


<link rel="stylesheet" href="/perfect-scrollbar/css/perfect-scrollbar.min.css">
<link rel="stylesheet" href="/styles/main.css">






</head>
<body
  
    class="monochrome"
  
  >
  <div class="mobile-header">
  <button class="sidebar-toggle" type="button">
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
  </button>
  <a class="title" href="/">turbochao</a>
</div>

  <div class="main-container">
    <div class="sidebar">
  <div class="header">
    <h1 class="title"><a href="/">turbochao</a></h1>
    
    <div class="info">
      <div class="content">
        
        
          <div class="author">刘广超</div>
        
      </div>
      
        <div class="avatar">
          
            <a href="/about"><img src="https://cn.gravatar.com/avatar/35fef74d731255cd569c2c2b0b9e87e4?s=200"></a>
          
        </div>
      
    </div>
  </div>
  <div class="body">
    
      
        <ul class="nav">
          
            
              <li class="category-list-container">
                <a href="javascript:;">類別</a>
                
              </li>
            
          
            
              <li class="tag-list-container">
                <a href="javascript:;">標籤</a>
                
              </li>
            
          
            
              <li class="archive-list-container">
                <a href="javascript:;">彙整</a>
                <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/">2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/">2015</a><span class="archive-list-count">1</span></li></ul>
              </li>
            
          
        </ul>
      
        <ul class="nav">
          
            
              <li>
                <a href="/" title="Homepage">Homepage</a>
              </li>
            
          
            
              <li>
                <a href="/archives" title="By Year">By Year</a>
              </li>
            
          
        </ul>
      
        <ul class="nav">
          
            
              <li>
                <a href="https://github.com/denjones/hexo-theme-chan" title="Chan" target="_blank" rel="external">Chan</a>
              </li>
            
          
            
              <li>
                <a href="https://github.com/denjones" title="Github" target="_blank" rel="external">Github</a>
              </li>
            
          
            
              <li>
                <a href="/atom.xml" title="RSS">RSS</a>
              </li>
            
          
        </ul>
      
    
  </div>
</div>

    <div class="main-content">
      
        <div style="max-width: 1000px">
      
          

  
  
    <div class="post-list">
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2016/11/10/hello-world/" >
  Hello World
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2016/11/10/hello-world/"><span class="article-date">
  2016-11-10
</span>
</a>
        

        

      </div>
      <div class="article-entry">
        
          <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="刘广超"><a href="#刘广超" class="headerlink" title="刘广超"></a>刘广超</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

        
      </div>
    </div>

  
    </div>
  

  
  
    <div class="post-list">
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2016/05/18/测试文档/" >
  Node API
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2016/05/18/测试文档/"><span class="article-date">
  2016-05-18
</span>
</a>
        

        

      </div>
      <div class="article-entry">
        
          <h2 id="fs-核心模块"><a href="#fs-核心模块" class="headerlink" title="fs 核心模块"></a>fs 核心模块</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">+ const fs = require (&apos;fs&apos;)</div><div class="line"></div><div class="line">- fs.watchFile</div><div class="line"></div><div class="line">- fs.watchFile(&apos;./README.html&apos;,&#123;persistent:true,interval:500&#125;,(curr,prev)=&gt;&#123;&#125;)</div><div class="line"></div><div class="line">+ const net=require (&apos;net&apos;)</div><div class="line"></div><div class="line">//创建一个服务器</div><div class="line"></div><div class="line">- server=net.creatServer()</div><div class="line"></div><div class="line">- server.on(&apos;connection&apos;,socket=&gt;&#123;&#125;)</div><div class="line"></div><div class="line">+ process.stdin.on(&apos;data&apos;,data=&gt;&#123;</div><div class="line">    </div><div class="line">  &#125;)</div></pre></td></tr></table></figure>
<h2 id="http-请求报文解析"><a href="#http-请求报文解析" class="headerlink" title="http 请求报文解析"></a>http 请求报文解析</h2><p>当你在浏览器地址栏输入了一个地址：<a href="http://127.0.0.1:3000/" target="_blank" rel="external">http://127.0.0.1:3000/</a><br>浏览器按照 HTTP 协议将你输入的地址包装成 HTTP 请求报文，内容如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">GET / HTTP/1.1</div><div class="line">Host: 127.0.0.1:3000</div><div class="line">Connection: keep-alive</div><div class="line">Cache-Control: max-age=0</div><div class="line">Upgrade-Insecure-Requests: 1</div><div class="line">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.116 Safari/537.36</div><div class="line">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8</div><div class="line">Accept-Encoding: gzip, deflate, sdch</div><div class="line">Accept-Language: zh-CN,zh;q=0.8</div><div class="line"></div><div class="line">请求报文格式如下：</div><div class="line"></div><div class="line">- 请求头</div><div class="line">  + 请求首行</div><div class="line">* 请求方法 请求路径 HTTP协议版本</div><div class="line">  + 请求首部字段</div><div class="line">* 首都字段中放一些额外的附加信息</div><div class="line">* 例如 User-Agent 表示告诉服务器我这个客户端是什么</div><div class="line">  - 这里为什么有各种浏览器的标识</div><div class="line">  - 原因在早期的网页有各种各样兼容性问题</div><div class="line">  - 这个字段还可以用来统计浏览器的使用量占比情况</div><div class="line">* Accept</div><div class="line">  - 早期的 HTTP 0.9 中，只能收发普通字符数据 不支持图片等富文本信息</div><div class="line">  - 历史原因，现代的服务器和客户端浏览器已经不需要这个东西</div><div class="line">- 空行</div><div class="line">- 请求体</div><div class="line">  + 如果是 post 请求才有请求体</div><div class="line">  + 如果有请求体，则请求体是在请求头的回车换行之后</div><div class="line">  + 如果没有，也会有一个空行存在</div><div class="line"></div><div class="line">    响应报文：</div><div class="line"></div><div class="line">- 响应头</div><div class="line">  + 响应首行</div><div class="line">* HTTP协议版本 状态码 状态短语</div><div class="line">  + 响应首部字段</div><div class="line">- 空行</div><div class="line">- 响应体</div><div class="line">  + 所有的响应数据都在响应头之后的空行之后</div></pre></td></tr></table></figure>
<h2 id="http-和-net-的关系"><a href="#http-和-net-的关系" class="headerlink" title="http 和 net 的关系"></a>http 和 net 的关系</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line">const net = require(&apos;net&apos;)</div><div class="line">net</div><div class="line">  .createServer()</div><div class="line">  .on(&apos;connection&apos;, socket =&gt; &#123;</div><div class="line">socket.on(&apos;data&apos;, data =&gt; &#123;</div><div class="line">  // console.log(data.toString())</div><div class="line"></div><div class="line">  // 自己动手解析请求报文</div><div class="line">  // 1. 按照空行将请求体和请求报文分割</div><div class="line">  // 2. 按照换行将请求头分割</div><div class="line">  //数组中第 0 项就是请求首行</div><div class="line">  //其它所有项都是请求首部字段</div><div class="line"></div><div class="line">  data = data.toString()</div><div class="line">  const requestContext = data.split(&apos;\r\n\r\n&apos;)</div><div class="line"></div><div class="line">  const requestHead = requestContext[0]</div><div class="line">  const requestBody = requestContext[1]</div><div class="line"></div><div class="line">  const req = &#123;&#125;</div><div class="line"></div><div class="line">  // url method httpVersion</div><div class="line">  // headers</div><div class="line">  // &#123; key: value, key:value &#125; 给在给 req 对象的 headers</div><div class="line"></div><div class="line">  const requestHeadFirst = requestHead.split(&apos;\r\n&apos;)[0].split(&apos; &apos;)</div><div class="line"></div><div class="line">  req.method = requestHeadFirst[0]</div><div class="line">  req.url = requestHeadFirst[1]</div><div class="line">  req.httpVersion = requestHeadFirst[2]</div><div class="line">  req.headers = &#123;&#125;</div><div class="line"></div><div class="line">  const requestHeadFileds = requestHead.split(&apos;\r\n&apos;).slice(1)</div><div class="line"></div><div class="line">  for(let item of requestHeadFileds) &#123;</div><div class="line">const tmp = item.split(&apos;: &apos;)</div><div class="line">req.headers[tmp[0]] = tmp[1]</div><div class="line">  &#125;</div><div class="line">  console.log(req)</div><div class="line"></div><div class="line">  // net 模块中发送数据只是纯粹的发送你传入的字符串</div><div class="line">  socket.write(`</div><div class="line">HTTP/1.1 200 OK</div><div class="line">Server: Itcast</div><div class="line">foo: bar</div><div class="line">Content-Type: text/html; charset=utf-8</div><div class="line"></div><div class="line">&lt;h1&gt;hello world&lt;/h1&gt;`)</div><div class="line">  socket.end()</div><div class="line">&#125;)</div><div class="line">  &#125;)</div><div class="line">  .listen(3000, () =&gt; &#123;</div><div class="line">console.log(&apos;server is running at port 3000.&apos;)</div><div class="line">  &#125;)</div></pre></td></tr></table></figure>
<h3 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h3><p>net 和 http 模块的关系：</p>
<pre><code>- http 模块是构建与 net 模块之上的
- http 中的收发数据还是通过 net 模块中的 Socket 收发数据的
- http 会将收发的数据按照 HTTP 协议自动帮你解析和包装
  + 例如 http 模块自动将请求报文解析出来，然后挂载给了 req 请求对象
  + 你可以通过 req 请求对象去拿到你想要的信息
- 为什么既有 net 又有 http 呢？
  + http 只是一个基于 net 之上的一个模块，该模块遵循的 http 协议
  + 会对收发的数据进行 协议格式解析和包装
  + HTTP 协议只是适用于B/S模型
- 有的业务功能使用的是别的协议
  + 例如 一些智能终端，就用的是别的协议，而不是 HTTP
  + 但是他们都是基于最基本的 Socket 网络编程模型而构建的
</code></pre><h2 id="浏览器的本质"><a href="#浏览器的本质" class="headerlink" title="浏览器的本质"></a>浏览器的本质</h2><ul>
<li>Socket 客户端</li>
<li>收发数据</li>
<li>渲染 HTML、CSS</li>
<li>解析和执行 JavaScript 代码</li>
</ul>
<h2 id="使用-http-模块构建-http-服务器"><a href="#使用-http-模块构建-http-服务器" class="headerlink" title="使用 http 模块构建 http 服务器"></a>使用 http 模块构建 http 服务器</h2><h3 id="1-请求"><a href="#1-请求" class="headerlink" title="1. 请求"></a>1. 请求</h3><ul>
<li><ol>
<li>监听服务器 Server 对象的 Request 请求事件，设置请求处理函数</li>
</ol>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">server.on(&apos;request&apos;, )</div><div class="line">任何请求都会触发该 request 请求事件，然后执行事件处理函数</div><div class="line">也就是说所有的请求入口就是这个 request 事件</div><div class="line">Node 将每一个请求中的请求报文信息解析为一个对象：Request ，挂载给请求处理函数的第一个参数</div><div class="line">也就是说可以通过 Request 请求对象拿到一些请求报文信息，例如请求方法、请求路径、请求头部字段等信息</div><div class="line">同时，Node 还提供了一个接口对象：Response</div><div class="line">该对象可以用来给当前请求发送响应数据</div><div class="line">server.on(&apos;request&apos;, (req, res) =&gt; &#123;</div><div class="line">res.end(&apos;hello world&apos;)</div><div class="line">&#125;)</div><div class="line">示例:</div><div class="line">const http = require(&apos;http&apos;)</div><div class="line"></div><div class="line">const server = http.createServer()</div><div class="line"></div><div class="line">erver.on(&apos;request&apos;, (req, res) =&gt; &#123;</div><div class="line">&#125;)</div><div class="line"></div><div class="line"> server.listen(3000, () =&gt; &#123;</div><div class="line"> console.log(&apos;Server is running at port 3000.&apos;)</div><div class="line"> &#125;)</div></pre></td></tr></table></figure>
<ul>
<li><ol>
<li>根据不同的请求路径做出不同的响应</li>
</ol>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">const http = require(&apos;http&apos;)</div><div class="line"></div><div class="line">const server = http.createServer()</div><div class="line"></div><div class="line">server.on(&apos;request&apos;, (req, res) =&#123;</div><div class="line">  // 当用户访问 / 返回 index page</div><div class="line">  // 当用户访问 /add 返回 add page</div><div class="line">  // 当用户访问 /about 返回 about page</div><div class="line">  // 当用户访问 /xxx 未知资源   返回 404</div><div class="line"></div><div class="line">  // 1. 获取当前的请求路径（通过 Request 请求对象的 url 属性获取）</div><div class="line">  //这里的请求路径永远都是以 / 开头的</div><div class="line">  //例如你在浏览器地址中输入的是 http://127.0.0.1:3000  则 url 就是 /</div><div class="line">  // http://127.0.0.1:3000/  则 url 就是 /</div><div class="line">  // http://127.0.0.1:3000/add  则 url 就是 /add</div><div class="line">  const url = req.url</div><div class="line"></div><div class="line">  // 2.1 请求完毕之后，可以使用 res.write 方法发送响应数据</div><div class="line">  res.write(url)</div><div class="line">  res.write(&apos; end.&apos;)</div><div class="line"></div><div class="line">  // 2.2 注意：res.write 可以向响应流中多次发送响应数据</div><div class="line">  //但是一定要记得在写完响应流数据最后，调用 res.end() 方法结束响应</div><div class="line">  //否则，客户端浏览器还以为你的数据没有发送完毕，一直等待接收</div><div class="line">  res.end()</div><div class="line">  // 2.3 一般发送响应数据的时候，很少有这种需要多次调用 write 方法来发送的数据</div><div class="line">        就是说一般就是 res.write(&apos;响应数据&apos;) res.end() 结束响应</div><div class="line">        所以，可以使用 res.end(&apos;响应数据&apos;) 直接发送响应数据，同时结束响应</div><div class="line">&#125;)</div><div class="line"></div><div class="line">server.listen(3000, () =&#123;</div><div class="line">  console.log(&apos;Server is running at port 3000.&apos;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<ul>
<li><ol>
<li>根据不同请求响应不同的页面</li>
</ol>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line">const http = require(&apos;http&apos;)</div><div class="line">const fs = require(&apos;fs&apos;)</div><div class="line"></div><div class="line">const server = http.createServer()</div><div class="line"></div><div class="line">server.on(&apos;request&apos;, (req, res) =&gt; &#123;</div><div class="line">  const url = req.url</div><div class="line"></div><div class="line">  if (url === &apos;/&apos;) &#123;</div><div class="line">fs.readFile(&apos;./data/index.html&apos;, (err, data) =&gt; &#123;</div><div class="line">  if (err) &#123;</div><div class="line">throw err</div><div class="line">  &#125;</div><div class="line">  // 如果你要处理一些读取出来的 html 字符串，那读文件的时候就指定编码或者调用 data.toString() 方法转为字符</div><div class="line">  // 这里因为不处理字符串，所以就不转字符</div><div class="line">  // res.end() 只能接收 二进制数据或者 字符串，其它都报错</div><div class="line">  // 如果传递的字符串，则发送响应的时候，还会自动将字符串转为二进制再发送</div><div class="line">  // 如果直接就传递的是二进制数据，则直接发送</div><div class="line">  res.writeHead(200, &apos;OK&apos;, &#123;</div><div class="line">&apos;Content-Type&apos;: &apos;text/html; charset=utf-8&apos;</div><div class="line">  &#125;)</div><div class="line">  res.end(data)</div><div class="line">&#125;)</div><div class="line">  &#125; else if (url === &apos;/add&apos;) &#123;</div><div class="line">fs.readFile(&apos;./data/add.html&apos;, (err, data) =&gt; &#123;</div><div class="line">  if (err) &#123;</div><div class="line">throw err</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  // 可以通过 res.writeHead 方法在结束响应之前，写响应头</div><div class="line">  res.writeHead(202, &apos;OK&apos;, &#123;</div><div class="line">&apos;Content-Type&apos;: &apos;text/html; charset=utf-8&apos;</div><div class="line">  &#125;)</div><div class="line"></div><div class="line">  // 当客户端浏览器收到你发送的响应数据的时候</div><div class="line">  // 浏览器会先查看响应报文头中的 Content-Type 中的 charset 编码，然后根据该编码解析数据</div><div class="line">  // 如果响应报文头中没有 Content-Type 那么浏览器则根据 HTML 结构中的 &lt;meta charset=&quot;UTF-8&quot;&gt; 来解析数据</div><div class="line">  res.end(data)</div><div class="line">&#125;)</div><div class="line">  &#125; else if (url === &apos;/about&apos;) &#123;</div><div class="line">res.writeHead(200, &apos;OK&apos;, &#123;</div><div class="line">  &apos;Content-Type&apos;: &apos;text/plain; charset=utf-8&apos;</div><div class="line">&#125;)</div><div class="line">res.end(&apos;about page&apos;)</div><div class="line">  &#125; else &#123;</div><div class="line">fs.readFile(&apos;./data/404.html&apos;, (err, data) =&gt; &#123;</div><div class="line">  if (err) &#123;</div><div class="line">throw err</div><div class="line">  &#125;</div><div class="line">  res.writeHead(404, &apos;Not Found&apos;, &#123;</div><div class="line">&apos;Content-Type&apos;: &apos;text/html; charset=utf-8&apos;</div><div class="line">  &#125;)</div><div class="line">  res.end(data)</div><div class="line">&#125;)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">&#125;)</div><div class="line"></div><div class="line">server.listen(3000, () =&gt; &#123;</div><div class="line">  console.log(&apos;Server is running at port 3000.&apos;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<ul>
<li><ol>
<li>处理静态资源和动态资源</li>
</ol>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div></pre></td><td class="code"><pre><div class="line">const http = require(&apos;http&apos;)</div><div class="line">const fs = require(&apos;fs&apos;)</div><div class="line">const path = require(&apos;path&apos;)</div><div class="line">const mime = require(&apos;mime&apos;)</div><div class="line"></div><div class="line">http</div><div class="line">  .createServer()</div><div class="line">  .on(&apos;request&apos;, (req, res) =&gt; &#123;</div><div class="line">// /  index.html</div><div class="line">// /add add.html</div><div class="line">// /404 404.html</div><div class="line">// http://127.0.0.1:3000/public/css/main.css</div><div class="line">// http://127.0.0.1:3000/public/js/main.js</div><div class="line"></div><div class="line">const url = req.url</div><div class="line"></div><div class="line">if (url === &apos;/&apos;) &#123;</div><div class="line">  fs.readFile(&apos;./views/index.html&apos;, (err, data) =&gt; &#123;</div><div class="line">if (err) &#123;</div><div class="line">  throw err</div><div class="line">&#125;</div><div class="line">res.writeHead(200, &#123;</div><div class="line">  &apos;Content-Type&apos;: &apos;text/html; charset=utf-8&apos;</div><div class="line">&#125;)</div><div class="line">res.end(data)</div><div class="line">  &#125;)</div><div class="line">&#125; else if (url.startsWith(&apos;/public/&apos;)) &#123;</div><div class="line">  // /public/css/main.css</div><div class="line">  // /public/js/main.js</div><div class="line">  fs.readFile(`.$&#123;url&#125;`, (err, data) =&gt; &#123;</div><div class="line">if (err) &#123;</div><div class="line">  throw err</div><div class="line">&#125;</div><div class="line">// Content-Type ？</div><div class="line">// 无论是任何资源，都最好要有 Content-Type</div><div class="line">res.writeHead(200, &#123;</div><div class="line">  &apos;Content-Type&apos;: mime.lookup(url)</div><div class="line">&#125;)</div><div class="line">res.end(data)</div><div class="line">  &#125;)</div><div class="line">&#125; else if (url === &apos;/add&apos;) &#123;</div><div class="line">  fs.readFile(&apos;./views/add.html&apos;, (err, data) =&gt; &#123;</div><div class="line">if (err) &#123;</div><div class="line">  throw err</div><div class="line">&#125;</div><div class="line">res.writeHead(200, &#123;</div><div class="line">  &apos;Content-Type&apos;: &apos;text/html; charset=utf-8&apos;</div><div class="line">&#125;)</div><div class="line">res.end(data)</div><div class="line">  &#125;)</div><div class="line">&#125; else &#123;</div><div class="line">  fs.readFile(&apos;./views/404.html&apos;, (err, data) =&gt; &#123;</div><div class="line">if (err) &#123;</div><div class="line">  throw err</div><div class="line">&#125;</div><div class="line">res.writeHead(200, &#123;</div><div class="line">  &apos;Content-Type&apos;: &apos;text/html; charset=utf-8&apos;</div><div class="line">&#125;)</div><div class="line">res.end(data)</div><div class="line">  &#125;)</div><div class="line">&#125;</div><div class="line"></div><div class="line">  &#125;)</div><div class="line">  .listen(3000, () =&gt; &#123;</div><div class="line">console.log(&apos;Server is running at port 3000.&apos;)</div><div class="line">  &#125;)</div></pre></td></tr></table></figure>

        
      </div>
    </div>

  
    </div>
  

  
  
    <div class="post-list">
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2015/06/23/我的前端学习笔记/" >
  我的前端学习笔记
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2015/06/23/我的前端学习笔记/"><span class="article-date">
  2015-06-23
</span>
</a>
        

        

      </div>
      <div class="article-entry">
        
          
        
      </div>
    </div>

  
    </div>
  






          <div class="main-footer">
  
    © 2016 turbochao - Powered by <a href="http://hexo.io" target="_blank">Hexo</a> - Theme <a href="https://github.com/denjones/hexo-theme-chan" target="_blank">Chan</a>
  
</div>

      
        </div>
      
    </div>
  </div>
  <script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>

  <link rel="stylesheet" href="/PhotoSwipe/photoswipe.css">
  <link rel="stylesheet" href="/PhotoSwipe/default-skin/default-skin.css">

  <!-- Root element of PhotoSwipe. Must have class pswp. -->
  <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
             It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

      <!-- Container that holds slides.
                PhotoSwipe keeps only 3 of them in the DOM to save memory.
                Don't modify these 3 pswp__item elements, data is added later on. -->
      <div class="pswp__container">
        <div class="pswp__item"></div>
        <div class="pswp__item"></div>
        <div class="pswp__item"></div>
      </div>

      <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
      <div class="pswp__ui pswp__ui--hidden">

        <div class="pswp__top-bar">

          <!--  Controls are self-explanatory. Order can be changed. -->

          <div class="pswp__counter"></div>

          <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

          <button class="pswp__button pswp__button--share" title="Share"></button>

          <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

          <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

          <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
          <!-- element will get class pswp__preloader--active when preloader is running -->
          <div class="pswp__preloader">
            <div class="pswp__preloader__icn">
              <div class="pswp__preloader__cut">
                <div class="pswp__preloader__donut"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
          <div class="pswp__share-tooltip"></div>
        </div>

        <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>

        <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button>

        <div class="pswp__caption">
          <div class="pswp__caption__center"></div>
        </div>
      </div>
    </div>
  </div>

  <script src="/PhotoSwipe/photoswipe.js"></script>
  <script src="/PhotoSwipe/photoswipe-ui-default.js"></script>


<script src="/perfect-scrollbar/js/min/perfect-scrollbar.min.js"></script>
<script src="/scripts/main.js"></script>

</body>
</html>
